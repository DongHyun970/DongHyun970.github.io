<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¬¼ë¥˜ ë¡œì¼€ì´ì…˜ ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; max-width: 600px; margin: auto; }
        input, button { width: 100%; padding: 10px; margin-bottom: 10px; box-sizing: border-box; }
        .success { color: green; font-weight: bold; }
        .error { color: red; font-weight: bold; }
    </style>
</head>
<body>

    <h1>ğŸ“¦ ë¡œì¼€ì´ì…˜ ì§€ì • / ì¬ê³  ì…ê³ </h1>
    <p>ë°”ì½”ë“œ ìŠ¤ìºë„ˆ(ì˜ˆ: ëª¨ë°”ì¼ ì¹´ë©”ë¼)ë¡œ ì¸ì‹í•˜ê±°ë‚˜ ì§ì ‘ ì…ë ¥í•˜ì„¸ìš”.</p>
    
    <form id="locationForm">
        <label for="barcode">ìƒí’ˆ ë°”ì½”ë“œ:</label>
        <input type="text" id="barcode" placeholder="ìƒí’ˆ ë°”ì½”ë“œë¥¼ ìŠ¤ìº”/ì…ë ¥" required>

        <label for="batchNo">ë°°ì¹˜ë²ˆí˜¸:</label>
        <input type="text" id="batchNo" placeholder="ë°°ì¹˜ë²ˆí˜¸ë¥¼ ìŠ¤ìº”/ì…ë ¥" required>

        <label for="location">ë™ ë¡œì¼€ì´ì…˜ ë°”ì½”ë“œ:</label>
        <input type="text" id="location" placeholder="ë™ ë¡œì¼€ì´ì…˜ì„ ìŠ¤ìº”/ì…ë ¥" required>
        
        <label for="quantity">ìˆ˜ëŸ‰ (ì…ê³ ):</label>
        <input type="number" id="quantity" value="1" min="1" required>

        <button type="submit">âœ… ë¡œì¼€ì´ì…˜ ì§€ì • ë° ì…ê³ </button>
    </form>
    
    <div id="statusMessage"></div>

    <script>
        // ğŸš¨ ì¤‘ìš”: ì—¬ê¸°ì— 1ë‹¨ê³„ì—ì„œ ë³µì‚¬í•œ **GAS ì›¹ ì•± URL**ì„ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.
        const GAS_API_URL = 'YOUR_DEPLOYED_GAS_WEB_APP_URL_HERE'; 

        const form = document.getElementById('locationForm');
        const statusMessage = document.getElementById('statusMessage');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            statusMessage.innerHTML = 'ì²˜ë¦¬ ì¤‘...';
            statusMessage.className = '';

            const data = {
                barcode: document.getElementById('barcode').value.trim(),
                batchNo: document.getElementById('batchNo').value.trim(),
                location: document.getElementById('location').value.trim(),
                quantity: parseInt(document.getElementById('quantity').value, 10),
                action: "IN_LOC"
            };
            
            // fetchë¥¼ ì‚¬ìš©í•˜ì—¬ GAS APIë¡œ ë°ì´í„° ì „ì†¡
            try {
                const response = await fetch(GAS_API_URL, {
                    method: 'POST',
                    // GASëŠ” JSON í˜•íƒœì˜ ë°ì´í„°ë¥¼ postData.contentsë¡œ ë°›ê¸° ìœ„í•´ Content-Typeì„ ì§€ì •
                    headers: {
                        'Content-Type': 'text/plain' // ì¤‘ìš”: CORS ìš°íšŒë¥¼ ìœ„í•´ text/plainì„ ê¶Œì¥
                    },
                    body: JSON.stringify(data)
                });
                
                const result = await response.json();

                if (result.success) {
                    statusMessage.innerHTML = `SUCCESS: ${result.message}`;
                    statusMessage.className = 'success';
                    // ì„±ê³µ í›„ ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
                    document.getElementById('barcode').value = '';
                    document.getElementById('batchNo').value = '';
                    document.getElementById('location').value = '';
                    document.getElementById('quantity').value = '1';
                    document.getElementById('barcode').focus(); // ë‹¤ì‹œ ìŠ¤ìº”í•  ìˆ˜ ìˆë„ë¡ í¬ì»¤ìŠ¤ ì´ë™
                } else {
                    statusMessage.innerHTML = `ERROR: ${result.message}`;
                    statusMessage.className = 'error';
                }
            } catch (error) {
                statusMessage.innerHTML = `í†µì‹  ì‹¤íŒ¨: ì„œë²„ ì—°ê²° ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ (${error.message})`;
                statusMessage.className = 'error';
            }
        });
    </script>
</body>
</html>
